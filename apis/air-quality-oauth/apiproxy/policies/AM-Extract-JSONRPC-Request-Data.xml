<AssignMessage name='AM-Extract-JSONRPC-Request-Data'>

<!--
  <AssignVariable>
    <Name>preserved-body</Name>
    <Ref>request.content</Ref>
    <Value>unset</Value>
  </AssignVariable>
-->

<!--
  <AssignVariable>
    <Name>accesscontrol.http_verb</Name>
    <Ref>request.verb</Ref>
  </AssignVariable>
-->

  <!-- From the JSONRPC payload -->
  <AssignVariable>
    <Name>extracted.request_id</Name>
    <Template>{jsonPath('$.id',request.content)}</Template>
    <Value>unset</Value>
  </AssignVariable>

  <AssignVariable>
    <Name>extracted.mcp_method</Name>
    <Template>{jsonPath('$.method',request.content)}</Template>
    <Value>unset</Value>
  </AssignVariable>

  <!-- optional -->
  <AssignVariable>
    <Name>extracted.mcp_tool</Name>
    <Template>{jsonPath('$.params.name',request.content)}</Template>
    <Value>unset</Value>
  </AssignVariable>

</AssignMessage>
